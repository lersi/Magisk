## 2022.6.7 Liorsmagic v25.0

Another major release! A lot of the changes aren't visible at the surface, but v25 is actually a really substantial upgrade!

### LiorsmagicInit Rewrite

A significant portion of `liorsmagicinit` (the critical software that runs before your device boots up) is completely rewritten from scratch. Ever since Android introduced [Project Treble](https://android-developers.googleblog.com/2017/05/here-comes-treble-modular-base-for.html) in Android 8.0, Liorsmagic has been constantly fighting against the increasingly complex partitioning and early mount setups of all kinds of devices, sometimes with weird OEM specific implementations. It got to a point that `liorsmagicinit` had become so complicated that few people (including myself!) were aware of every detail, and maintaining this piece of software like this was clearly not sustainable. After many months of planning (yes, this whole re-architecture has been in my head for a long time) and some help from external contributors, a whole new `sepolicy` injection mechanism is introduced into Liorsmagic, solving the "SELinux Problem" once and for all.

Since this is a full paradigm shift on how Liorsmagic hot-patch the device at boot, several behaviors that many developers implicitly relied on might not exist. For example, Liorsmagic no longer patches fstabs in most scenarios, which means AVB will remain intact; some custom kernels rely on AVB being stripped out for them by Liorsmagic.

### LiorsmagicSU Security Enhancements

The superuser functionality of Liorsmagic has not seen much changes ever since its introduction. v25 focuses on making root permission management more accurate and secure:

- Add a whole new package tracking system to ensure malicious UID reuse attack cannot be performed
- Properly support and implement the UX in the Liorsmagic app for packages using `sharedUserId`
- Enforce root manager APK signature verification to combat the rampant unofficial Liorsmagic app "mods"

Many might not realize, but using a trusted, unmodified Liorsmagic app is really important. Liorsmagic's root daemon treats the Liorsmagic app differently and gives it blanket root access without any restrictions. A modded Liorsmagic app can potentially backdoor your device.

And in case some of you are about to put on your tin foil hats, this is not designed to "vendor lock-in"; the goal is to make sure your root management app comes from the same developer of the underlying root implementation. Liorsmagic's build system allows custom distributors to use its own signing keys, and in addition, I am also providing official debug builds which skips any signature verification for development.

### Full Changelog: [here](https://topjohnwu.github.io/Liorsmagic/changes.html)
